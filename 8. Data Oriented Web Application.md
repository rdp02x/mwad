# 8. Data Oriented Web Application

> Develop a data oriented application for user data (user id, name, address, contact number) management. The application should provide interface to add, update, delete and list data of user(s).
> 
1. Use SQLite database
2. Download SQL Server Management Studio 21 for database connection and management.
3. Install Nuget Packages: System.Data.SQLite (From Solution explorer)

### Webform.aspx

```csharp
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="WebForm1.aspx.cs" Inherits="Database_crud.WebForm1" %>
<!DOCTYPE html>
<html xmlns="<http://www.w3.org/1999/xhtml>">
   <head runat="server">
      <title></title>
   </head>
   <body>
      <form id="form1" runat="server">
         <div>
            <asp:Label ID="lblid" runat="server" Text="ID:"></asp:Label>
            <asp:TextBox ID="txtid" runat="server"></asp:TextBox>
            <br />
            <asp:Label ID="lblname" runat="server" Text="Name:"></asp:Label>
            <asp:TextBox ID="Txtname" runat="server"></asp:TextBox>
            <br />
            <asp:Label ID="lbladdress" runat="server" Text="Address"></asp:Label>
            <asp:TextBox ID="txtaddress" runat="server"></asp:TextBox>
            <br />
            <asp:Label ID="lblcontact" runat="server" Text="Contact Number"></asp:Label>
            <asp:TextBox ID="txtcontactno" runat="server"></asp:TextBox>
            <br />
            <asp:Button ID="Btninsert" runat="server" Text="Insert" OnClick="Btninsert_Click" />
            <asp:Button ID="Btnupdate" runat="server" Text="Update" OnClick="Btnupdate_Click"  />
            <asp:Button ID="Btndelete" runat="server" Text="Delete" OnClick="Btndelete_Click"  />
            <asp:Button ID="Btnshow" runat="server" Text="Show" OnClick="Btnshow_Click" />
            <asp:GridView ID="dataGridView1" runat="server"></asp:GridView>
         </div>
      </form>
   </body>
</html>

```

### Webform.aspx.cs

```csharp
using System;
using System.Collections.Generic;
using System.Configuration;
using System.Data;
using System.Data.SqlClient;
using System.Data.SQLite;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Xml.Linq;

namespace Database_crud {
    public partial class WebForm1 : System.Web.UI.Page {
        string connStr = ConfigurationManager.ConnectionStrings["SQLServerConnection"].ConnectionString;

        protected void Page_Load(object sender, EventArgs e) {}

        protected void Btninsert_Click(object sender, EventArgs e) {
            using (SqlConnection con = new SqlConnection(connStr)) {
                con.Open();
                string query = "INSERT INTO Users (id, name, address, contact_number) VALUES (@id, @name, @address, @contact_number)";
                SqlCommand cmd = new SqlCommand(query, con);
                cmd.Parameters.AddWithValue("@id", txtid.Text);
                cmd.Parameters.AddWithValue("@name", Txtname.Text);
                cmd.Parameters.AddWithValue("@address", txtaddress.Text);
                cmd.Parameters.AddWithValue("@contact_number", txtcontactno.Text);
                cmd.ExecuteNonQuery();
                con.Close();
            }
        }

        protected void Btnupdate_Click(object sender, EventArgs e) {
            using (SqlConnection con = new SqlConnection(connStr)) {
                con.Open();
                string query = "UPDATE Users SET name=@name, address=@address, contact_number=@contact_number WHERE id=@id";
                SqlCommand cmd = new SqlCommand(query, con);
                cmd.Parameters.AddWithValue("@id", txtid.Text);
                cmd.Parameters.AddWithValue("@name", Txtname.Text);
                cmd.Parameters.AddWithValue("@address", txtaddress.Text);
                cmd.Parameters.AddWithValue("@contact_number", txtcontactno.Text);
                cmd.ExecuteNonQuery();
            }
        }

        protected void Btndelete_Click(object sender, EventArgs e) {
            using (SqlConnection con = new SqlConnection(connStr)) {
                con.Open();
                string query = "DELETE FROM Users WHERE id=@id";
                SqlCommand cmd = new SqlCommand(query, con);
                cmd.Parameters.AddWithValue("@id", txtid.Text);
                cmd.ExecuteNonQuery();
            }
        }

        protected void Btnshow_Click(object sender, EventArgs e) {
            using (SqlConnection con = new SqlConnection(connStr)) {
                con.Open();
                SqlDataAdapter da = new SqlDataAdapter("SELECT * FROM Users", con);
                DataTable dt = new DataTable();
                da.Fill(dt);
                dataGridView1.DataSource = dt;
                dataGridView1.DataBind();
            }
        }
    }
}

```

### Web.config

In `<configuration>` tag below `<configSections>`

```xml
<connectionStrings>
    <add name="SQLServerConnection"
		 connectionString="Data Source=(localdb)\\MSSQLLocalDB;Initial Catalog=User;Integrated Security=True;"
		 providerName="System.Data.SqlClient" />
</connectionStrings>

```